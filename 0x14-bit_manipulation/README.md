Bit manipulation in C, this is a redo
